graph LR
    subgraph "Refactoring Journey: Key Fixes Applied"
        subgraph "Problem 1: Third-party Logging Interference"
            P1["âŒ Issue:<br/>LLM & PARSL logs<br/>appearing in console<br/>despite file-only mode"]
            
            subgraph "Solution 1: Logging System Enhancement"
                S1A["ğŸ”§ _configure_global_logging()<br/>- Conditional basicConfig<br/>- Mode-aware setup"]
                S1B["ğŸ”‡ _suppress_third_party_console_logging()<br/>- Target specific loggers<br/>- Remove console handlers"]
                S1C["ğŸ”„ Dynamic reconfiguration<br/>- Runtime mode switching<br/>- Utility functions"]
            end
            
            P1 --> S1A
            S1A --> S1B
            S1B --> S1C
        end

        subgraph "Problem 2: Data Unit Content Invisibility"
            P2["âŒ Issue:<br/>Data operations<br/>not logging content<br/>unreadable JSON output"]
            
            subgraph "Solution 2: Enhanced Data Logging"
                S2A["ğŸ“ log_data_unit_operation()<br/>- Detailed operation logging<br/>- Content inclusion"]
                S2B["ğŸ¨ _serialize_data_for_logging()<br/>- Clean JSON formatting<br/>- Proper indentation"]
                S2C["ğŸ“Š Rich metadata<br/>- Operation types<br/>- Timestamps<br/>- Content details"]
            end
            
            P2 --> S2A
            S2A --> S2B
            S2B --> S2C
        end

        subgraph "Problem 3: Pydantic V1 Deprecation Warnings"
            P3["âŒ Issue:<br/>Pydantic V1 patterns<br/>causing deprecation<br/>warnings in V2"]
            
            subgraph "Solution 3: Complete V2 Migration"
                S3A["âš™ï¸ ConfigDict Migration<br/>- class Config â†’ model_config<br/>- use_enum_values=True"]
                S3B["ğŸ”„ Method Updates<br/>- .dict() â†’ .model_dump()<br/>- .schema() â†’ .model_json_schema()"]
                S3C["âœ… Import Cleanup<br/>- validator â†’ field_validator<br/>- Remove deprecated imports"]
            end
            
            P3 --> S3A
            S3A --> S3B
            S3B --> S3C
        end

        subgraph "Problem 4: Parsl Configuration Error"
            P4["âŒ Issue:<br/>'dict' object has<br/>no attribute 'label'<br/>HPC execution failing"]
            
            subgraph "Solution 4: Parsl Integration Fix"
                S4A["ğŸ—ï¸ Dynamic Executor Creation<br/>- Dict â†’ Object conversion<br/>- Class import handling"]
                S4B["ğŸ“ Parameter Correction<br/>- max_workers â†’ max_workers_per_node<br/>- Proper Parsl API usage"]
                S4C["ğŸ”„ Config Reuse Handling<br/>- 'Already loaded' error fix<br/>- DFK reuse logic"]
            end
            
            P4 --> S4A
            S4A --> S4B
            S4B --> S4C
        end
    end

    subgraph "Impact & Results"
        Result1["ğŸ¯ Clean Console Output<br/>File-only mode works<br/>Third-party logs suppressed"]
        Result2["ğŸ“– Readable Data Logs<br/>Rich content visibility<br/>Structured JSON output"]
        Result3["ğŸš« Zero Warnings<br/>Full Pydantic V2 compliance<br/>Future-proof codebase"]
        Result4["ğŸš€ HPC Execution<br/>Parsl integration working<br/>Distributed computing ready"]
    end

    S1C --> Result1
    S2C --> Result2
    S3C --> Result3
    S4C --> Result4

    subgraph "Testing & Validation"
        T1["ğŸ§ª Logging Tests<br/>- Mode verification<br/>- Third-party suppression<br/>- Content logging"]
        T2["ğŸ”¬ Pydantic Tests<br/>- Migration verification<br/>- Warning detection<br/>- Functionality preservation"]
        T3["âš¡ Parsl Tests<br/>- Configuration validation<br/>- Executor creation<br/>- Demo functionality"]
    end

    Result1 --> T1
    Result2 --> T1
    Result3 --> T2
    Result4 --> T3

    %% Styling
    classDef problem fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef solution fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef result fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef test fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    
    class P1,P2,P3,P4 problem
    class S1A,S1B,S1C,S2A,S2B,S2C,S3A,S3B,S3C,S4A,S4B,S4C solution
    class Result1,Result2,Result3,Result4 result
    class T1,T2,T3 test 